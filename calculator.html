<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>GreenBite â€” Calculator</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="header container"><div class="brand"><img src="assets/logo.svg" style="height:40px"><div style="font-weight:800">GreenBite</div></div>
<nav><a href="index.html">Home</a><a href="recipes.html">Recipes</a><a href="calculator.html">Calculator</a></nav></header>

<main class="container">
  <h1>Calorie & Nutrition Calculator</h1>
  <form id="calcForm" class="card" style="max-width:720px">
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <label>Age (years)<input id="age" type="number" required></label>
      <label>Gender
        <select id="gender">
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
      </label>
      <label>Height (cm)<input id="height" type="number" required></label>
      <label>Weight (kg)<input id="weight" type="number" required></label>
      <label>Activity
        <select id="activity">
          <option value="1.2">Sedentary</option>
          <option value="1.375">Lightly active</option>
          <option value="1.55">Moderately active</option>
          <option value="1.725">Very active</option>
          <option value="1.9">Super active</option>
        </select>
      </label>
    </div>
    <div style="margin-top:12px">
      <button class="btn" id="calcBtn" type="button">Calculate</button>
      <button type="reset" style="margin-left:8px">Reset</button>
    </div>
  </form>

  <div id="result" style="margin-top:16px"></div>
</main>

<script src="scripts/common.js"></script>
<script>
document.getElementById('calcBtn').addEventListener('click', ()=>{
  const age = Number(document.getElementById('age').value);
  const gender = document.getElementById('gender').value;
  const height = Number(document.getElementById('height').value);
  const weight = Number(document.getElementById('weight').value);
  const activity = Number(document.getElementById('activity').value);

  if(!age || !height || !weight) { alert('Please fill all fields.'); return; }

  // BMR
  let bmr = 10 * weight + 6.25 * height - 5 * age + (gender==='male'?5:-161);
  const tdee = Math.round(bmr * activity);

  // macros
  const carbs_g = Math.round((tdee * 0.50) / 4);
  const protein_g = Math.round((tdee * 0.20) / 4);
  const fat_g = Math.round((tdee * 0.30) / 9);

  const out = document.getElementById('result');
  out.innerHTML = `
    <div class="card">
      <h3>Results</h3>
      <p>BMR: <strong id="bmrVal">${Math.round(bmr)}</strong> kcal</p>
      <p>TDEE: <strong id="tdeeVal">${tdee}</strong> kcal</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <div>
          <div class="small">Carbohydrates</div>
          <div class="progress"><i id="carbsBar" style="width:0%"></i></div>
          <div>${carbs_g} g</div>
        </div>
        <div>
          <div class="small">Protein</div>
          <div class="progress"><i id="protBar" style="width:0%"></i></div>
          <div>${protein_g} g</div>
        </div>
      </div>
      <div style="margin-top:10px">
        <div class="small">Fat</div>
        <div class="progress"><i id="fatBar" style="width:0%"></i></div>
        <div>${fat_g} g</div>
      </div>
    </div>
  `;
  // animate bars & numbers using reusable function
  const tdeeEl = document.getElementById('tdeeVal');
  animateNumber(tdeeEl, tdee, 700);
  document.getElementById('carbsBar').style.width = '50%';
  document.getElementById('protBar').style.width = '20%';
  document.getElementById('fatBar').style.width = '30%';
});
</script>
</body>
</html>
